
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nus-cs2030s.github.io/2324-s1/26-wildcard.html">
      
      
        <link rel="prev" href="25-unchecked.html">
      
      
        <link rel="next" href="27-inference.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>26. Wildcards - CS2030S Programming Methodology II</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="light-green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unit-26-wildcards" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="CS2030S Programming Methodology II" class="md-header__button md-logo" aria-label="CS2030S Programming Methodology II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CS2030S Programming Methodology II
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              26. Wildcards
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="CS2030S Programming Methodology II" class="md-nav__button md-logo" aria-label="CS2030S Programming Methodology II" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CS2030S Programming Methodology II
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="00-overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0. Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="01-compiler.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Program and Compiler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="02-type.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Variables and Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="03-function.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="04-encapsulation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Encapsulation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="05-infohiding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Information Hiding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="06-tell-dont-ask.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Tell, Don't Ask
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="07-static-field.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Class Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="08-static-method.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Class Methods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="09-composition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Composition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="10-heap-stack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Heap and Stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="11-inheritance.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Inheritance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="12-overriding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. Overriding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="13-overloading.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13. Overloading
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="14-polymorphism.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14. Polymorphism
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="15-dynamic-binding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15. Method Invocation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="16-lsp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16. LSP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="17-abstract.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17. Abstract Class
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="18-interface.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18. Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="19-wrapper.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19. Wrapper Class
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="20-casting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20. Run-Time Class Mismatch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="21-variance.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21. Variance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="22-exception.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22. Exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="23-generics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23. Generics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="24-erasure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24. Type Erasure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="25-unchecked.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25. Unchecked Warnings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    26. Wildcards
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="26-wildcard.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    26. Wildcards
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-example" class="md-nav__link">
    Running Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contains-with-arrayt" class="md-nav__link">
    contains with Array&lt;T&gt;
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copying-to-and-from-arrayt" class="md-nav__link">
    Copying to and from Array&lt;T&gt;
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upper-bounded-wildcards" class="md-nav__link">
    Upper-Bounded Wildcards
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lower-bounded-wildcards" class="md-nav__link">
    Lower-Bounded Wildcards
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pecs" class="md-nav__link">
    PECS
  </a>
  
    <nav class="md-nav" aria-label="PECS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriving-pecs" class="md-nav__link">
    Deriving PECS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unbounded-wildcards" class="md-nav__link">
    Unbounded Wildcards
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#back-to-contains" class="md-nav__link">
    Back to contains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revisiting-raw-types" class="md-nav__link">
    Revisiting Raw Types
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="27-inference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    27. Type Inference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="28-immutability.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    28. Immutability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="29-nested-classes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    29. Nested Class
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="30-functions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    30. Side Effect-Free Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="31-box-maybe.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    31. Box and Maybe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="32-lazy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    32. Lazy Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="33-infinitelist.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    33. Infinite List
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="34-stream.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    34. Streams in Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="35-logger.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    35. Loggable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="36-monad.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    36. Monad
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="37-parallel.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    37. Parallel Streams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="38-thread.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    38. Threads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="39-async.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    39. Asynchronous Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="40-forkjoin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    40. Fork and Join
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lab Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Lab Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="environments.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programming Environments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="github.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unix CLI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Unix CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="unix/background.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="unix/essentials.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Essentials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="unix/advanced.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vim
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Vim
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vim/philosophy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vim/setup.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vim/quick-lessons.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lessons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vim/tips.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vim/plugins.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vim/cheatsheet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheat Sheet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Java Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Java Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="style.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coding Style
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="javadoc.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaDoc
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="unit-26-wildcards">Unit 26: Wildcards</h1>
<div class="admonition abstract">
<p class="admonition-title">Learning Objectives</p>
<p>Students should</p>
<ul>
<li>be aware of the meaning of wildcard <code>?</code> and bounded wildcards.</li>
<li>know how to use wildcards to write methods that are more flexible in accepting a range of types.</li>
<li>know that upper-bounded wildcard is covariant and lower-bounded wildcard is contravariant.</li>
<li>know the PECS principle and how to apply it.</li>
<li>be aware that the unbounded wildcard allows us to not use raw types in our programs.</li>
</ul>
</div>
<h2 id="running-example">Running Example</h2>
<p>For our running example in this unit, we will be using the following subtyping relationship.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Shape</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">:</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Circle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">:</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Square</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">:</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">ColoredCircle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Circle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">:</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">LinedCircle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Circle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">:</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The class diagram for visualization is shown below.  Note that <code>Shape</code> extends from <code>Object</code> implicitly.</p>
<p><img alt="Wildcard" src="figures/ClassDiagram10.png" /></p>
<h2 id="contains-with-arrayt"><code>contains</code> with <code>Array&lt;T&gt;</code></h2>
<p>Now that we have our <code>Array&lt;T&gt;</code> class, let's modify our generic <code>contains</code> method and replace the type of the argument <code>T[]</code> with <code>Array&lt;T&gt;</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Contains with Generic <code>Array&lt;T&gt;</code></label><label for="__tabbed_1_2">Contains with Generic Array <code>T[]</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// version 0.5 (with generic array)</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">getLength</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">T</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// version 0.5 (with generic array)</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">T</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Similar to the version that takes in <code>T[]</code>, using generics allows us to constrain the type of the elements of the array and the object to search for to be the same.  This allows the following code to type-check correctly:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stringArray</span><span class="p">;</span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">circleArray</span><span class="p">;</span>
<span class="n">Circle</span><span class="w"> </span><span class="n">circle</span><span class="p">;</span>
<span class="w">  </span><span class="p">:</span>
<span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">stringArray</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// OK: Array&lt;String&gt; &lt;: Array&lt;String&gt;  &amp;  String &lt;: String</span>
<span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">circle</span><span class="p">);</span><span class="w">  </span><span class="c1">// OK: Array&lt;Circle&gt; &lt;: Array&lt;Circle&gt;  &amp;  Circle &lt;: Circle</span>
</code></pre></div></td></tr></table></div>
<p>But trying to search for a circle in an array of strings would lead to a type error:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">stringArray</span><span class="p">,</span><span class="w"> </span><span class="n">circle</span><span class="p">);</span><span class="w"> </span><span class="c1">// ERROR: Circle &lt;/: String</span>
</code></pre></div></td></tr></table></div>
<p>Consider now having an array of shapes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="w"> </span><span class="n">shapeArray</span><span class="p">;</span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">circleArray</span><span class="p">;</span>
<span class="n">Shape</span><span class="w"> </span><span class="n">shape</span><span class="p">;</span>
<span class="n">Circle</span><span class="w"> </span><span class="n">circle</span><span class="p">;</span>
<span class="w">  </span><span class="p">:</span>
<span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">shapeArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w">     </span><span class="c1">// OK: Array&lt;Shape&gt;  &lt;: Array&lt;Shape&gt;   &amp;  Shape  &lt;: Shape</span>
<span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">circle</span><span class="p">);</span><span class="w">  </span><span class="c1">// OK: Array&lt;Circle&gt; &lt;: Array&lt;Circle&gt;  &amp;  Circle &lt;: Circle</span>
</code></pre></div></td></tr></table></div>
<p>As expected, we can pass <code>Shape</code> as the argument for <code>T</code>, and search for a <code>Shape</code> in an instance of <code>Array&lt;Shape&gt;</code>. Similarly, we can pass <code>Circle</code> as the argument for <code>T</code> and search for a <code>Circle</code> in an instance of <code>Array&lt;Circle&gt;</code>.</p>
<p>We could also look for a <code>Circle</code> instance from <code>Array&lt;Shape&gt;</code> if we pass <code>Shape</code> as the argument for <code>T</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">shapeArray</span><span class="p">,</span><span class="w"> </span><span class="n">circle</span><span class="p">);</span><span class="w"> </span><span class="c1">// OK: Array&lt;Shape&gt; &lt;: Array&lt;Shape&gt;   &amp;  Circle &lt;: Shape</span>
</code></pre></div></td></tr></table></div>
<p>Note that we can pass in a <code>Circle</code> instance as a <code>Shape</code>, since <code>Circle</code> &lt;: <code>Shape</code>.</p>
<p>Recall that generics are invariant in Java (<em>i.e., there is no subtyping relationship between</em> <code>Array&lt;Shape&gt;</code> <em>and</em> <code>Array&lt;Circle&gt;</code>).  <code>Array&lt;Circle&gt;</code> is not a subtype of <code>Array&lt;Shape&gt;</code>.  Otherwise, it would violate the Liskov Substitution Principle, we can put a square into an <code>Array&lt;Shape&gt;</code> instance, but we can't put a square into an <code>Array&lt;Circle&gt;</code> instance.</p>
<p>So, we can't call:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">shapeArray</span><span class="p">,</span><span class="w"> </span><span class="n">circle</span><span class="p">);</span><span class="w"> </span><span class="c1">// ERROR: Array&lt;Shape&gt; &lt;/: Array&lt;Circle&gt;</span>
</code></pre></div></td></tr></table></div></p>
<p>The following would result in compilation errors as well:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w">  </span><span class="c1">// ERROR: Array&lt;Circle&gt; &lt;/: Array&lt;Shape&gt;</span>
<span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w"> </span><span class="c1">// ERROR: Shape &lt;/: Circle</span>
</code></pre></div></td></tr></table></div>
<p>Thus, with our current implementation, we can't look for a shape (<em>which may be a circle</em>) in an array of circles, even though this is something reasonable that a programmer might want to do.  This constraint is due to the invariance of generics -- while we avoided the possibility of run-time errors by avoiding covariance arrays, our methods have become less general.</p>
<p>Let's see how we can fix this with bounded type parameters first.  We can introduce another type parameter, say <code>S</code>, to remove the constraints that the type of the array must be the same as the type of the object to search for.  I.e., we change from</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>to:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">S</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>But we don't want to completely decouple <code>T</code> and <code>S</code>, as we want <code>T</code> to be a subtype of <code>S</code>.  We can thus make <code>T</code> a bounded type parameter, and write:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>Now, we can search for a shape in an array of circles.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">     </span><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="p">,</span><span class="n">Circle</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="copying-to-and-from-arrayt">Copying to and from <code>Array&lt;T&gt;</code></h2>
<p>Let's consider another example.  Let's add two methods <code>copyFrom</code> and <code>copyTo</code>, to <code>Array&lt;T&gt;</code> so that we can copy to and from one array to another.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// version 0.4 (with copy)</span>
<span class="kd">class</span> <span class="nc">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>

<span class="w">  </span><span class="n">Array</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// The only way we can put an object into the array is through</span>
<span class="w">    </span><span class="c1">// the method set() and we only put an object of type T inside.</span>
<span class="w">    </span><span class="c1">// So it is safe to cast `Object[]` to `T[]`.</span>
<span class="w">    </span><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="o">[]</span><span class="p">)</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[</span><span class="n">size</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyFrom</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyTo</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this implementation, we can copy, say, an <code>Array&lt;Circle&gt;</code> to another <code>Array&lt;Circle&gt;</code>, an <code>Array&lt;Shape&gt;</code> to another <code>Array&lt;Shape&gt;</code>, but not an <code>Array&lt;Circle&gt;</code> into an <code>Array&lt;Shape&gt;</code>, even though each circle is a shape!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">circleArray</span><span class="p">;</span><span class="w"> </span><span class="c1">// T = Circle --&gt; copyTo(Array&lt;Circle&gt;) &amp; copyFrom(Array&lt;Circle&gt;)</span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="w"> </span><span class="n">shapeArray</span><span class="p">;</span><span class="w">   </span><span class="c1">// T = Shape  --&gt; copyTo(Array&lt;Shape&gt;)  &amp; copyFrom(Array&lt;Shape&gt;)</span>
<span class="w">  </span><span class="p">:</span>
<span class="n">shapeArray</span><span class="p">.</span><span class="na">copyFrom</span><span class="p">(</span><span class="n">circleArray</span><span class="p">);</span><span class="w"> </span><span class="c1">// ERROR: Array&lt;Circle&gt; &lt;/: Array&lt;Shape&gt;</span>
<span class="n">circleArray</span><span class="p">.</span><span class="na">copyTo</span><span class="p">(</span><span class="n">shapeArray</span><span class="p">);</span><span class="w">   </span><span class="c1">// ERROR: Array&lt;Shape&gt;  &lt;/: Array&lt;Circle&gt;</span>
</code></pre></div></td></tr></table></div>
<h2 id="upper-bounded-wildcards">Upper-Bounded Wildcards</h2>
<p>Let's consider the method <code>copyFrom</code>.  We should be able to copy from an array of shapes, an array of circles, an array of squares, etc, into an array of shapes.  In other words, we should be able to copy from <em>an array of any subtype of shapes</em> into an array of shapes.  Is there such a type in Java?</p>
<p>The type that we are looking for is <code>Array&lt;? extends Shape&gt;</code>.  This generic type uses the <em>wildcard</em> <code>?</code>.  Just like a wild card in card games, it is a substitute for any type.   A wildcard can be bounded.  Here, this wildcard is upper-bounded by <code>Shape</code> (<em>i.e., the</em> <code>?</code> <em>can be substituted with either</em> <code>Shape</code> <em>or any subtype of</em> <code>Shape</code>).</p>
<p>They key here is <em>substituted</em>.  Consider our running example.  Given the type <code>Array&lt;? extends Shape&gt;</code>, the <code>?</code> can be substituted with any one of the following:</p>
<ul>
<li><code>Shape</code>: because <code>Shape</code> &lt;: <code>Shape</code> so we get <code>Array&lt;Shape&gt;</code>.</li>
<li><code>Circle</code>: because <code>Circle</code> &lt;: <code>Shape</code> so we get <code>Array&lt;Circle&gt;</code>.</li>
<li><code>Square</code>: because <code>Square</code> &lt;: <code>Shape</code> so we get <code>Array&lt;Square&gt;</code>.</li>
<li><code>ColoredCircle</code>: because <code>ColoredCircle</code> &lt;: <code>Shape</code> so we get <code>Array&lt;ColoredCircle&gt;</code>.</li>
<li><code>LinedCircle</code>: because <code>LinedCircle</code> &lt;: <code>Shape</code> so we get <code>Array&lt;LinedCircle&gt;</code>.</li>
</ul>
<p>This can be seen more clearly by looking at the class diagram.  In the class diagram below, the types that can be used to substitute <code>?</code> is highlighted with red background.</p>
<p><img alt="Upper-Bound" src="figures/ClassDiagram11.png" /></p>
<p>What this means is that we can actually do the following sequence of assignments.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="o">&gt;</span><span class="w"> </span><span class="n">arr</span><span class="p">;</span>
<span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">ColoredCircle</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// ? is substituted with ColoredCircle</span>
<span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">        </span><span class="c1">// ? is now substituted with Square</span>
</code></pre></div></td></tr></table></div>
<p>The upper-bounded wildcard is an example of covariance. The upper-bounded wildcard has the following subtyping relations:</p>
<ul>
<li>If <code>S</code> &lt;: <code>T</code>, then <code>A&lt;? extends S&gt;</code> &lt;: <code>A&lt;? extends T&gt;</code> (<em>covariance</em>)</li>
<li>For any type <code>S</code>, <code>A&lt;S&gt;</code> &lt;: <code>A&lt;? extends S&gt;</code></li>
</ul>
<p>To see this, consider <code>Array&lt;? extends Circle&gt;</code> and <code>Array&lt;? extends Shape&gt;</code>.  Now we look at the types that can be used to substitute <code>?</code> in both cases.  The types are summarized in the table below.</p>
<table>
<thead>
<tr>
<th><code>Array&lt;? extends Circle&gt;</code></th>
<th><code>Array&lt;? extends Shape&gt;</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td><code>Shape</code></td>
</tr>
<tr>
<td><code>Circle</code></td>
<td><code>Circle</code></td>
</tr>
<tr>
<td>-</td>
<td><code>Square</code></td>
</tr>
<tr>
<td><code>ColoredCircle</code></td>
<td><code>ColoredCircle</code></td>
</tr>
<tr>
<td><code>LinedCircle</code></td>
<td><code>LinedCircle</code></td>
</tr>
</tbody>
</table>
<p>So, whatever type can be used to substitute <code>?</code> in <code>Array&lt;? extends Circle&gt;</code> can also be used to substitute <code>?</code> in <code>Array&lt;? extends Shape&gt;</code>.  So the following assignment would work because whatever type we substitute <code>?</code> with, <code>Array&lt;? extends Shape&gt;</code> can accept those.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">arr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">..;</span><span class="w"> </span><span class="c1">// run-time type omitted</span>
<span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="o">&gt;</span><span class="w"> </span><span class="n">arr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr1</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>The table can also be visualized using class diagram.  Blue background highlights the type that can be used to substitute <code>?</code> for <code>Array&lt;? extends Circle&gt;</code> and red background highlights the type that can be used to substitute <code>?</code> for <code>Array&lt;? extends Shape&gt;</code>.  If one is a subset of the other, it implies a subtyping relationship.</p>
<p><img alt="Subtype Upper" src="figures/ClassDiagram12.png" /></p>
<p>Simply using the covariance rule above, we can also infer a few things.  For instance, we can infer <code>Array&lt;Circle&gt;</code> &lt;: <code>Array&lt;? extends Shape&gt;</code>.  The proof is as follows</p>
<ol>
<li><code>Circle</code> &lt;: <code>Shape</code> <span style="float:right">(<em>given</em>)</span></li>
<li><code>Array&lt;Circle&gt;</code> &lt;: <code>Array&lt;? extends Circle&gt;</code> <span style="float:right">(<em>upper-bounded wildcard property</em>)</span></li>
<li><code>Array&lt;? extends Circle&gt;</code> &lt;: <code>Array&lt;? extends Shape&gt;</code> <span style="float:right">(<em>using (1) and covariance of upper-bounder wildcard</em>)</span></li>
<li><code>Array&lt;ircle&gt;</code> &lt;: <code>Array&lt;? extends Shape&gt;</code> <span style="float:right">(<em>transitivity of subtyping relationship using (2) and (3)</em>)</span></li>
</ol>
<p>So now, because <code>Array&lt;Circle&gt;</code> &lt;: <code>Array&lt;? extends Shape&gt;</code>, if we change the type of the parameter to <code>copyFrom</code> to <code>Array&lt;? extends T&gt;</code>, </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyFrom</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We can now call:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">shapeArray</span><span class="p">.</span><span class="na">copyFrom</span><span class="p">(</span><span class="n">circleArray</span><span class="p">);</span><span class="w"> </span><span class="c1">// OK: Array&lt;Circle&gt; &lt;: Array&lt;? extends Shape&gt;</span>
</code></pre></div></td></tr></table></div>
<p>without error.</p>
<h2 id="lower-bounded-wildcards">Lower-Bounded Wildcards</h2>
<p>Let's now try to allow copying of an <code>Array&lt;Circle&gt;</code> to <code>Array&lt;Shape&gt;</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">circleArray</span><span class="p">.</span><span class="na">copyTo</span><span class="p">(</span><span class="n">shapeArray</span><span class="p">);</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>by doing the same thing:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyTo</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The code above would not compile.  We will get the following somewhat cryptic message when we compile with the <code>-Xdiags:verbose</code> flag:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>Array.java:32: error: method set in class Array&lt;T&gt; cannot be applied to given types;
        dest.set(i, this.get(i));
          ^
  required: int,CAP#1
  found: int,T
  reason: argument mismatch; T cannot be converted to CAP#1
  where T is a type-variable:
    T extends Object declared in class Array
  where CAP#1 is a fresh type-variable:
    CAP#1 extends T from capture of ? extends T
1 error
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">CAP?</p>
<p>The type <code>CAP#1</code> is an internal compiler name for the implicit type parameter represented by the wildcard (<em>i.e.,</em> <code>?</code>).  The name comes from "<em>capture</em>".  The numbering is to differentiate the different captured types.</p>
<p>Similar to how different declared type parameters are renamed with <code>#1</code> and <code>#2</code>, all the <code>?</code> are referring to different implicit type parameters.  So, the different <code>?</code> can be replaced with different type arguments.</p>
</div>
<p>Let's try not to understand what the error message means first, and think about what could go wrong if the compiler allows:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">        </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>Here, we are trying to put an instance with compile-time type <code>T</code> into an array that contains elements with the compile-time type of <code>T</code> or subtype of <code>T</code>.  </p>
<p>The <code>copyTo</code> method of <code>Array&lt;Shape&gt;</code> would allow an <code>Array&lt;Circle&gt;</code> as an argument, and we would end up putting instance with compile-time type <code>Shape</code> into <code>Array&lt;Circle&gt;</code>.  If all the shapes are circles, we are fine, but there might be other shapes (<em>rectangles, squares</em>) in <code>this</code> instance of <code>Array&lt;Shape&gt;</code>, and we can't fit them into <code>Array&lt;Circle&gt;</code>!  Thus, the line </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">        </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>is not type-safe and could lead to <code>ClassCastException</code> during run-time.  </p>
<p>Where can we copy our shapes into?  We can only copy them safely into an <code>Array&lt;Shape&gt;</code>, <code>Array&lt;Object&gt;</code>, for instance.  In other words, into arrays containing <code>Shape</code> or supertype of <code>Shape</code>.  Unfortunately our running example no longer have <code>GetAreable</code>.  Otherwise, we can also safely insert into <code>Array&lt;GetAreable&gt;</code> too!</p>
<p>We need a wildcard lower-bounded by <code>Shape</code>, and Java's syntax for this is <code>? super Shape</code>.  Using this new notation, we can replace the type for <code>dest</code> with:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyTo</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The code would now type-check and compile.  We can do the entire reasoning similar to the reasoning we did for upper-bounder wildcard.  First, let's keep it specific.  We will let <code>T</code> to be <code>Circle</code>.  This means <code>Array&lt;? super T&gt;</code> should be treated as <code>Array&lt;? super Circle&gt;</code><sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.  So now we try to figure out what are the types that can be used to substitute <code>?</code> in <code>Array&lt;? super Circle&gt;</code>.  There are only 3 possible types:</p>
<ul>
<li><code>Circle</code>: because <code>Circle</code> &lt;: <code>Circle</code> so we get <code>Array&lt;Circle&gt;</code>.</li>
<li><code>Shape</code>: because <code>Circle</code> &lt;: <code>Shape</code> so we get <code>Array&lt;Shape&gt;</code>.</li>
<li><code>Object</code>: because <code>Circle</code> &lt;: <code>Object</code> so we get <code>Array&lt;Object&gt;</code>.</li>
</ul>
<p>Again, visually, this will be the following class diagram.</p>
<p><img alt="Lower-Bound" src="figures/ClassDiagram13.png" /></p>
<p>Now, looking back at the relevant part of the code of <code>copyTo</code>, we see the following line:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">        </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>First, the method <code>set</code> has the following signature: <code>Array::set(int, T)</code>.  The type <code>T</code> depends on the type of <code>dest</code>.  Second, the method <code>get</code> has the following descriptor <code>T Array::get(int)</code>.  The type<code>T</code> depends on the type of <code>this</code>.</p>
<p>Now, remember, the compile-time type of <code>dest</code> is <code>Array&lt;? super Circle&gt;</code> and the compile-time type of <code>this</code> is <code>Array&lt;Circle&gt;</code> (<em>because we let</em> <code>T</code> <em>to be</em> <code>Circle</code>).  By process of enumeration, we see that all possibilities of types that can be used to substitute <code>?</code> in the compile-time type of <code>dest</code> can safely accept <code>Circle</code>.</p>
<ul>
<li><code>Circle</code>: the method signature for <code>set</code> is <code>Array::set(int, Circle)</code> and the return type of <code>Array::get(int)</code> is <code>Circle</code> so this type-checked because <code>Circle</code> &lt;: <code>Circle</code>.</li>
<li><code>Shape</code>: the method signature for <code>set</code> is <code>Array::set(int, Shape)</code> and the return type of <code>Array::get(int)</code> is <code>Circle</code> so this type-checked because <code>Circle</code> &lt;: <code>Shape</code>.</li>
<li><code>Object</code>: the method signature for <code>set</code> is <code>Array::set(int, Object)</code> and the return type of <code>Array::get(int)</code> is <code>Circle</code> so this type-checked because <code>Circle</code> &lt;: <code>Object</code>.</li>
</ul>
<p>The lower-bounded wildcard is an example of contravariance.  We have the following subtyping relations:</p>
<ul>
<li>If <code>S</code> &lt;: <code>T</code>, then <code>A&lt;? super T&gt;</code> &lt;: <code>A&lt;? super S&gt;</code> (<em>contravariance</em>)</li>
<li>For any type <code>S</code>, <code>A&lt;S&gt;</code> &lt;: <code>A&lt;? super S&gt;</code></li>
</ul>
<p>Without going into the lengthy explanation with the tables, we will show the class diagram showing that <code>Array&lt;? super Shape&gt;</code> is a subtype of <code>Array&lt;? super Circle&gt;</code>.</p>
<p><img alt="Contravariant Lower" src="figures/ClassDiagram14.png" /></p>
<p>Since we did the proof for upper-bounded wildcard, let us do the same for lower-bounded wildcard.  We will show that <code>Array&lt;Shape&gt;</code> &lt;: <code>Array&lt;? super Circle&gt;</code>.</p>
<ol>
<li><code>Circle</code> &lt;: <code>Shape</code> <span style="float:right">(<em>given</em>)</span></li>
<li><code>Array&lt;Shape&gt;</code> &lt;: <code>Array&lt;? super Shape&gt;</code> <span style="float:right">(<em>lower-bounded wildcard property</em>)</span></li>
<li><code>Array&lt;? super Shape&gt;</code> &lt;: <code>Array&lt;? super Circle&gt;</code> <span style="float:right">(<em>using (1) and contravariance of lower-bounded wildcard</em>)</span></li>
<li><code>Array&lt;Shape&gt;</code> &lt;: <code>Array&lt;? super Circle&gt;</code> <span style="float:right">(<em>transitivity of subtyping relationship using (2) and (3)</em>)</span></li>
</ol>
<p>The line of code below now compiles:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">circleArray</span><span class="p">.</span><span class="na">copyTo</span><span class="p">(</span><span class="n">shapeArray</span><span class="p">);</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>Our new <code>Array&lt;T&gt;</code> is now</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// version 0.5 (with flexible copy using wildcards)</span>
<span class="kd">class</span> <span class="nc">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>

<span class="w">  </span><span class="n">Array</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The only way we can put an object into the array is through</span>
<span class="w">  </span><span class="c1">// the method set() and we only put an object of type T inside.</span>
<span class="w">  </span><span class="c1">// So it is safe to cast `Object[]` to `T[]`.</span>
<span class="w">  </span><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="o">[]</span><span class="p">)</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="o">[</span><span class="n">size</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyFrom</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyTo</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">.</span><span class="na">array</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition danger">
<p class="admonition-title">Non Subtype Reasoning</p>
<p>So far, we have shown the visualization for subtyping relationship.  In both cases, the types that can be substituted for <code>?</code> for the subtype is a subset of the types that can be substituted for <code>?</code> for the supertype.  What about the case where there is no subtyping relationship?</p>
<p>Consider <code>Array&lt;? extends Shape&gt;</code> and <code>Array&lt;? super Circle&gt;</code>.  Neither are a subtype of the other.  So how would this look like in the class diagram?</p>
<p><img alt="No Subtype" src="figures/ClassDiagram15.png" /></p>
<p>You can see that there is an overlap but clearly, none can be fully contained within the other.  This is what it looks like when there is no subtyping relationship.</p>
</div>
<h2 id="pecs">PECS</h2>
<p>Now we will introduce the rule that governs when we should use the upper-bounded wildcard <code>? extends T</code> and a lower-bounded wildcard <code>? super T</code>.  It depends on the role of the variable.   If the variable is a producer that returns a variable of type <code>T</code>, it should be declared with the wildcard <code>? extends T</code>.  Otherwise, if it is a consumer that accepts a variable of type <code>T</code>, it should be declared with the wildcard <code>? super T</code>.</p>
<p>As an example, the variable <code>src</code> in <code>copyFrom</code> above acts as a <em>producer</em>.  It produces a variable of type <code>T</code>.  The type parameter for <code>src</code> must be either <code>T</code> or a subtype of <code>T</code> to ensure type safety.  So the type for <code>src</code> is <code>Array&lt;? extends T&gt;</code>.    </p>
<p>On the other hand, the variable <code>dest</code> in <code>copyTo</code> above acts as a <em>consumer</em>.  It consumes a variable of type <code>T</code>.  The type parameter of <code>dest</code> must be either <code>T</code> or supertype of <code>T</code> for it to be type-safe.  As such, the type for <code>dest</code> is <code>Array&lt;? super T&gt;</code>.  </p>
<p>This rule can be remembered with the mnemonic PECS, or "Producer Extends; Consumer Super".</p>
<h3 id="deriving-pecs">Deriving PECS</h3>
<p>While it is easier to simply memorize PECS, you can actually derive these rules yourself.  The key here is to change your <em>point of view</em> from the client to the implementer.  As a client, you have to think about how you can use the methods implemented by the implementer given the method descriptor.  Let's simulate that.</p>
<p>First, a convention.  Since we are looking through the lens of a method, the method <em>consumes</em> a value via its parameter.  Additionally, the method <em>produces</em> a value via its return value.</p>
<p>Assume that we have the following six variables.  We have to exclude <code>Shape</code> because it cannot be instantiated.  Note that <code>ColoredCircle</code> &lt;: <code>Circle</code> &lt;: <code>Object</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Object</span><span class="w"> </span><span class="n">arg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="p">();</span>
<span class="n">Circle</span><span class="w"> </span><span class="n">arg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Circle</span><span class="p">(..);</span>
<span class="n">ColoredCircle</span><span class="w"> </span><span class="n">arg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ColoredCircle</span><span class="p">(..);</span>

<span class="n">Object</span><span class="w"> </span><span class="n">res1</span><span class="p">;</span>
<span class="n">Circle</span><span class="w"> </span><span class="n">res2</span><span class="p">;</span>
<span class="n">ColoredCircle</span><span class="w"> </span><span class="n">res3</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Now consider an implementer has implemented the method <code>f</code> with the following descriptor: <code>Circle f(Circle)</code>.  We can then see which of the method invocation works.</p>
<table>
<thead>
<tr>
<th>Invocation</th>
<th>Argument Type</th>
<th>Compilation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>f(arg1)</code></td>
<td><code>Object</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
<tr>
<td><code>f(arg2)</code></td>
<td><code>Circle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>f(arg3)</code></td>
<td><code>ColoredCircle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
</tbody>
</table>
<p><code>f(arg1)</code> fails compilation because the parameter is accepting <code>Circle</code> but we are passing <code>Object</code>.  Since <code>Object</code> is not a subtype of <code>Circle</code>, we have compilation error.</p>
<p>Now we assume that the argument will always be accepted by the parameter and we look at whether the return type can be accepted by the variable.</p>
<table>
<thead>
<tr>
<th>Invocation</th>
<th>Variable Type</th>
<th>Compilation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>res1 = f(..)</code></td>
<td><code>Object</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>res2 = f(..)</code></td>
<td><code>Circle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>res3 = f(..)</code></td>
<td><code>ColoredCircle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
</tbody>
</table>
<p><code>res3 = f(..)</code> fails compilation because the return type is <code>Circle</code>.  But we are trying to assign it to <code>ColoredCircle</code>.  Since <code>Circle</code> is not a subtype of <code>ColoredCircle</code>, we have compilation error.</p>
<p>Notice how what we have arrived at is the <em>opposite</em> of PECS<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>.  Looking at the <em>consumer</em> (<em>i.e., parameter</em>), we actually have "consumer extends" because we can accept <code>Circle</code> or subtype of <code>Circle</code> (<em>e.g.,</em> <code>ColoredCircle</code>).  Looking at the <em>produced</em> (<em>i.e., return value</em>), we actually have "producer super" because we can accept <code>Circle</code> or supertype of <code>Circle</code> (<em>e.g.,</em> <code>Object</code>).</p>
<p>So how do we derive PECS then?  We need to look at it from the point of view of the implementer.  Consider that as an implementer, you will always do the following line.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">res2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">arg2</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>So now, we need to know which of the following method descriptor can be used for <code>f</code>.  Let's draw two tables, one created by varying the parameter type and the other created by varying the return type.  Here we have to assume that each method descriptor are compiled separately and there is no overriding and/or overloading.</p>
<table>
<thead>
<tr>
<th>Method Descriptor</th>
<th>Parameter Type</th>
<th>Compilation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Circle f(Object)</code></td>
<td><code>Object</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>Circle f(Circle)</code></td>
<td><code>Circle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>Circle f(ColoredCircle)</code></td>
<td><code>ColoredCircle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
</tbody>
</table>
<p>Notice that now we are always passing <code>Circle</code> as argument.  So obviously, if a method can accept <code>Object</code>, it can also accept <code>Circle</code>.</p>
<table>
<thead>
<tr>
<th>Method Descriptor</th>
<th>Return Type</th>
<th>Compilation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Object f(Circle)</code></td>
<td><code>Object</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span></td>
</tr>
<tr>
<td><code>Circle f(Circle)</code></td>
<td><code>Circle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td><code>ColoredCircle f(Circle)</code></td>
<td><code>ColoredCircle</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
</tbody>
</table>
<p>Similarly, notice that we are always going to assign the return value to a variable that can accept <code>Circle</code>.  So if the method always returns <code>ColoredCircle</code>, it can be assigned to <code>Circle</code>.</p>
<p>The result now conforms to PECS!  So to derive PECS, you can change your point of view from client to implementer.  This follows the explanation we have given for <code>copyTo</code> and <code>copyFrom</code>.  We are -- after all -- the implementer of these two functions.  In the case of <code>copyTo</code>, we are always going to invoke the line</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">        </span><span class="n">dest</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
</code></pre></div></td></tr></table></div>
<p>This is similar to how we always execute <code>res2 = f(arg2);</code>.  Our choice of the type we can use for <code>res2</code> and <code>arg2</code> are now restricted.  In our derivation here, we change the method descriptor.  But in the explanation in this unit, we restrict the type parameter <code>T</code> to behave the way we want it to by using either upper-bounded or lower-bounded wildcards.</p>
<h2 id="unbounded-wildcards">Unbounded Wildcards</h2>
<p>It is also possible to have unbounded wildcards, such as <code>Array&lt;?&gt;</code>.  <code>Array&lt;?&gt;</code> is the supertype of every parameterized type of <code>Array&lt;T&gt;</code>.  Recall that <code>Object</code> is the supertype of all reference types.  When we want to write a method that takes in a reference type, but we want the method to be flexible enough, we can make the method accept a parameter of type <code>Object</code>.  Similarly, <code>Array&lt;?&gt;</code> is useful when you want to write a method that takes in an array of some specific type, and you want the method to be flexible enough to take in an array of any type.  For instance, if we have:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We could call it with:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ac</span><span class="p">;</span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">as</span><span class="p">;</span>
<span class="n">foo</span><span class="p">(</span><span class="n">ac</span><span class="p">);</span><span class="w"> </span><span class="c1">// ok</span>
<span class="n">foo</span><span class="p">(</span><span class="n">as</span><span class="p">);</span><span class="w"> </span><span class="c1">// ok</span>
</code></pre></div></td></tr></table></div></p>
<p>A method that takes in generic type with unbounded wildcard would be pretty restrictive, however.  Consider this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">:</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="n">array</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>What should the type of the returned element <code>x</code> be?  Since <code>Array&lt;?&gt;</code> is the supertype of all possible <code>Array&lt;T&gt;</code>, the method <code>foo</code> can receive an instance of <code>Array&lt;Circle&gt;</code>, <code>Array&lt;String&gt;</code>, etc. as an argument.  The only safe choice for the type of <code>x</code> is <code>Object</code>.</p>
<p>The type for <code>y</code> is every more restrictive.  Since there are many possibilities of what type of array it is receiving, we can only put <code>null</code> into <code>array</code>! </p>
<p>There is an important distinction to be made between <code>Array</code>, <code>Array&lt;?&gt;</code> and <code>Array&lt;Object&gt;</code>.  Whilst <code>Object</code> is the supertype of all <code>T</code>, it does not follow that <code>Array&lt;Object&gt;</code> is the supertype of all <code>Array&lt;T&gt;</code> due to generics being invariant. Therefore, the following statements will fail to compile:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Whereas the following statements will compile:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w">  </span><span class="c1">// Does compile</span>
<span class="n">Array</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Does compile</span>
</code></pre></div></td></tr></table></div>
<p>If we have a function
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">bar</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>Then, the method <code>bar</code> is restricted to <em>only</em> takes in an <code>Array&lt;Object&gt;</code> instance as argument.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ac</span><span class="p">;</span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">as</span><span class="p">;</span>
<span class="n">bar</span><span class="p">(</span><span class="n">ac</span><span class="p">);</span><span class="w"> </span><span class="c1">// compilation error</span>
<span class="n">bar</span><span class="p">(</span><span class="n">as</span><span class="p">);</span><span class="w"> </span><span class="c1">// compilation error</span>
</code></pre></div></td></tr></table></div>
<p>What about raw types?  Suppose we write the method below that accepts a raw type</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">qux</span><span class="p">(</span><span class="n">Array</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Then, the method <code>qux</code> is also flexible enough to take in any <code>Array&lt;T&gt;</code> as argument.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Array</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ac</span><span class="p">;</span>
<span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">as</span><span class="p">;</span>
<span class="n">qux</span><span class="p">(</span><span class="n">ac</span><span class="p">);</span><span class="w"> </span>
<span class="n">qux</span><span class="p">(</span><span class="n">as</span><span class="p">);</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>Unlike <code>Array&lt;?&gt;</code>, however, the compiler does not have the information about the type of the component of the array, and cannot type check for us.  It is up to the programmer to ensure type safety.  For this reason, we must not use raw types.</p>
<p>Intuitively, we can think of <code>Array&lt;?&gt;</code>, <code>Array&lt;Object&gt;</code>, and <code>Array</code> as follows:</p>
<ul>
<li><code>Array&lt;?&gt;</code> is an array of objects of some specific, but unknown type;</li>
<li><code>Array&lt;Object&gt;</code> is an array of <code>Object</code> instances, with type checking by the compiler;</li>
<li><code>Array</code> is an array of <code>Object</code> instances, without type checking.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Unbounded and Non Wildcard</p>
<p>For completeness, we will show the visualization in class diagram for <code>Array&lt;?&gt;</code> and for non wildcard such as <code>Array&lt;Circle&gt;</code>.  In the case of unbounded, it actually encompasses all types!</p>
<p><img alt="Unbounded" src="figures/ClassDiagram16.png" /></p>
<p>Clearly, it cannot be a subtype of anything besides <code>Array&lt;?&gt;</code> and <code>Object</code>.  The latter because <code>Object</code> is the root of the class hierarchy.  But at that point, we cannot invoke the methods intended for <code>Array</code>.  So while it is more <em>general</em>, it is less <em>flexible</em> to use <code>Object</code>.</p>
<p>Now for non wildcard, it is actually encompasses just that single type.  This is why <code>Array&lt;Circle&gt;</code> is a subtype of both <code>Array&lt;? extends Circle&gt;</code> and <code>Array&lt;? super Circle&gt;</code> when we reason only using class diagram visualization.</p>
<p><img alt="Not Wildcard" src="figures/ClassDiagram17.png" /></p>
</div>
<h2 id="back-to-contains">Back to <code>contains</code></h2>
<p>Now, let's simplify our <code>contains</code> methods with the help of wildcards.  Recall that to add flexibility into the method parameter and allow us to search for a shape in an array of circles, we have modified our method into the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// version 0.6 (with generic array)</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">S</span><span class="p">,</span><span class="n">T</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">getLength</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">T</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Can we make this simpler using wildcards?  Since we want to search for an object of type <code>S</code> in an array of its subtype, we can remove the second parameter type <code>T</code> and change the type of array to <code>Array&lt;? extends S&gt;</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">With Wild Cards Array</label><label for="__tabbed_2_2">With Generic Array</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// version 0.7 (with wild cards array)</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">getLength</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">S</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// version 0.6 (with generic array)</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">S</span><span class="p">,</span><span class="n">T</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">getLength</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">T</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>We can double-check that <code>array</code> is a producer (it produces <code>curr</code> on Line 5) and this follows the PECS rules.
Now, we can search for a shape in an array of circles.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">     </span><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>What is the difference between the two?  In version 0.6, we require two type parameters while in version 0.7 we only require one.  Say we have both versions in two different classes: <code>A.contains(Array&lt;? extends S&gt;, S)</code> and <code>B.contains(Array&lt;T&gt;, S)</code>.  Then we have the following behavior:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">     </span><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w"> </span><span class="c1">// OK</span>
<span class="w">     </span><span class="n">B</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="n">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w"> </span><span class="c1">// ERROR: wrong number of type arguments; required 2</span>

<span class="w">     </span><span class="n">A</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="p">,</span><span class="w"> </span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w"> </span><span class="c1">// ERROR: wrong number of type arguments; required 1</span>
<span class="w">     </span><span class="n">B</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Shape</span><span class="p">,</span><span class="w"> </span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">circleArray</span><span class="p">,</span><span class="w"> </span><span class="n">shape</span><span class="p">);</span><span class="w"> </span><span class="c1">// OK</span>
</code></pre></div></td></tr></table></div>
<h2 id="revisiting-raw-types">Revisiting Raw Types</h2>
<p>In previous units, we said that you may use raw types only in two scenarios. Namely, when using generics and <code>instanceof</code> together, and when creating arrays. However, with unbounded wildcards, we can now see it is possible to remove both of these exceptions. We can now use <code>instanceof</code> in the following way:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">a</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;?&gt;</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>Recall that in the example above, <code>instanceof</code> checks of the run-time type of <code>a</code>.  Previously, we said that we can't check for, say,</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">a</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>since the type argument <code>String</code> is not available during run-time due to erasure.  Using <code>&lt;?&gt;</code> fits the purpose here because it explicitly communicates to the reader of the code that we are checking that <code>a</code> is an instance of <code>A</code> with some unknown (<em>erased</em>) type parameter.</p>
<p>Similarly, we can create arrays in the following way:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">new</span><span class="w"> </span><span class="n">Comparable</span><span class="o">&lt;?&gt;[</span><span class="mi">10</span><span class="o">]</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Previously, we said that we could not create an array using the expression <code>new Comparable&lt;String&gt;[10]</code> because generics and arrays do not mix well.  Java insists that the array creation expression uses a <em>reifiable</em> type, i.e., a type where no type information is lost during compilation.  Unlike <code>Comparable&lt;String&gt;</code>, however, <code>Comparible&lt;?&gt;</code> is reifiable.  Since we don't know what is the type of <code>?</code>, no type information is lost during erasure!</p>
<p>Going forward now in the module, we will not permit the use of raw types in any scenario.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>The reasoning can be made more abstract without restricting <code>T</code> but that will only complicate things and make it more difficult to follow the argument.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>CEPS? PSCE?&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright by Department of Computer Science, National University of Singapore 2023
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "toc.follow", "toc.integrate", "content.code.annotate", "content.code.copy"], "search": "assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.81fa17fe.min.js"></script>
      
        <script src="javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  </body>
</html>